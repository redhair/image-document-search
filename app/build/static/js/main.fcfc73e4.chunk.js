(this["webpackJsonpimage-document-search"]=this["webpackJsonpimage-document-search"]||[]).push([[0],{103:function(e,n,t){},147:function(e,n,t){},167:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(19),i=t.n(o),c=(t(103),t(91)),l=t(90),u=t(35),s=t(5),m=t(16),g=t(17);function d(){var e=Object(m.a)(["\n  margin-top: 20px;\n  color: ",";\n"]);return d=function(){return e},e}function f(){var e=Object(m.a)(["\n  width: auto;\n  text-align: center;\n\n  & > div {\n    width: ",";\n    height: ",";\n    margin: ",";\n    background-color: ",";\n\n    border-radius: 100%;\n    display: inline-block;\n    -webkit-animation: scaleUpDown 1.5s infinite ease-in-out both;\n    animation: scaleUpDown 1.5s infinite ease-in-out both;\n  }\n\n  & .circle1 {\n    -webkit-animation-delay: -0.3s;\n    animation-delay: -0.3s;\n  }\n\n  & .circle2 {\n    -webkit-animation-delay: -0.15s;\n    animation-delay: -0.15s;\n  }\n\n  @-webkit-keyframes scaleUpDown {\n    0%,\n    80%,\n    100% {\n      -webkit-transform: scale(0);\n    }\n    40% {\n      -webkit-transform: scale(1);\n    }\n  }\n\n  @keyframes scaleUpDown {\n    0%,\n    80%,\n    100% {\n      -webkit-transform: scale(0);\n      transform: scale(0);\n    }\n    40% {\n      -webkit-transform: scale(1);\n      transform: scale(1);\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=Object(m.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  width: 100%;\n"]);return h=function(){return e},e}var p=g.a.div(h()),v=g.a.div(f(),(function(e){return e.small?"8px":"16px"}),(function(e){return e.small?"8px":"16px"}),(function(e){return e.small?"0 4px":"0 8px"}),(function(e){return e.color?e.color:"#333"})),b=g.a.h4(d(),(function(e){return e.color?e.color:"#333"})),w=function(e){var n=e.quiet,t=e.color,a=e.small,o=Object(s.a)(e,["quiet","color","small"]);return r.a.createElement(p,o,r.a.createElement(v,{color:t,small:a},r.a.createElement("div",{className:"circle1"}),r.a.createElement("div",{className:"circle2"}),r.a.createElement("div",{className:"circle3"})),!n&&r.a.createElement(b,{level:5,color:t},function(){var e=["You might want to get a cup of coffee...","Shovelling coal into the server...","Programming the flux capacitor","Please wait and enjoy the elevator music.","At least you're not on hold.","Please wait while the satellite moves into position.","Please wait, we are testing your patience."];return e[Math.round(Math.random()*(e.length-1))]}()))},x=t(39),E=t.n(x),y=function(){return E.a.get("https://secret-anchorage-11446.herokuapp.com/getS3Url")},O=function(e,n){return E.a.put(e,n,{headers:{"Content-Type":n.type}})};var S="".concat("https://secret-anchorage-11446.herokuapp.com/","images"),j=function(){return{type:"TOGGLE_MODAL"}},k=function(e){return{type:"SET_MODAL_CONTENT",content:e}},C=function(e){return{type:"SHOW_TOAST",toastProps:e}},T=function(e){return function(n){return n(C({level:"info",message:r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center"}},r.a.createElement("img",{style:{width:"100px",marginRight:"18px"},src:URL.createObjectURL(e),alt:e.name}),r.a.createElement("span",{style:{whiteSpace:"nowrap"}},"Uploading ",e.name),r.a.createElement(w,{small:!0,quiet:!0,style:{marginLeft:"12px"}}))})),function(e){return new Promise((function(n,t){y().then((function(e){return{imageId:"https://image-document-search.s3.amazonaws.com/"+e.data.key,url:e.data.url}})).then((function(a){var r=a.imageId,o=a.url;O(o,e).then((function(e){200===e.status?n(r):t("Image failed to upload")}))}))}))}(e).then((function(e){return function(e){return E.a.post("".concat(S),{image:e})}(e).then((function(e){n(C({level:"success",message:"Successfully Uploaded!"})),setTimeout((function(){n({type:"HIDE_TOAST"})}),1e3)})).catch((function(e){n(C({level:"danger",message:"Failed to upload image"}))}))})).catch((function(e){n(C({level:"danger",message:"Failed to upload image"}))}))}},D=t(179),R=t(89);var H=function(e){var n=e.modal,t=e.onClose;return r.a.createElement(R.a,{open:n.open,onClose:t,center:!0,styles:{overlay:{backdropFilter:"blur(20px)",background:"rgba(0, 0, 0, 0.6)"},modal:{backgroundColor:"white",borderRadius:"8px",display:"flex",flexDirection:"column",maxWidth:"800px",width:"100%",padding:"50px"}}},n.content)},N=t(178),P=t(180),q=t(183),I=t(182),U=t(28),A=t(13),_=t(29),L=t(30),F=t(32),M=t(181),W=t(177),z=t(87),G=t.n(z),V=function(e){function n(){var e,t;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(_.a)(this,(e=Object(L.a)(n)).call.apply(e,[this].concat(r)))).state={value:t.props.currentRefinement},t.onChange=function(e,n){var a=n.newValue;a||t.props.onSuggestionCleared(),t.setState({value:a})},t.onSuggestionsFetchRequested=function(e){var n=e.value;t.props.refine(n)},t.onSuggestionsClearRequested=function(){t.props.refine()},t}return Object(F.a)(n,e),Object(A.a)(n,[{key:"getSuggestionValue",value:function(e){return e.text}},{key:"renderSuggestion",value:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{height:"25",src:e.url,style:{marginRight:"8px"},alt:e.url}),r.a.createElement(M.a,{attribute:"text",hit:e,tagName:"mark"}))}},{key:"render",value:function(){var e=this.props,n=e.hits,t=e.onSuggestionSelected,a=this.state.value,o={placeholder:"Search for some text...",onChange:this.onChange,value:a};return r.a.createElement(G.a,{suggestions:n,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,onSuggestionSelected:t,getSuggestionValue:this.getSuggestionValue,renderSuggestion:this.renderSuggestion,inputProps:o})}}]),n}(a.Component),B=Object(W.a)(V);function J(){var e=Object(m.a)(["\n  overflow: hidden;\n  border-radius: 8px;\n\n  ","\n"]);return J=function(){return e},e}function Q(){var e=Object(m.a)(["\n  width: 100%;\n  height: 100%;\n  transition: transform 0.2s ease-in-out;\n"]);return Q=function(){return e},e}var X=g.a.img(Q()),Y=g.a.div(J(),(function(e){return e.withHover?"\n        &:hover {\n          & ".concat(X," {\n            transform: scale(1.05);\n          }\n        }"):null}));var $=function(e){var n=e.src,t=e.alt,a=e.withHover,o=e.style,i=Object(s.a)(e,["src","alt","withHover","style"]);return r.a.createElement(Y,{withHover:a,style:o},r.a.createElement(X,Object.assign({src:n,alt:t},i)))};function K(e){var n=e.hit,t=e.onHitClick;return r.a.createElement($,{withHover:!0,style:{cursor:"pointer",margin:"0 2rem 2rem 0"},onClick:function(){return t(n)},height:"150",src:n.url,alt:n.objectID})}var Z=function(e){var n=e.client,t=e.query,a=e.onSuggestionCleared,o=e.onSuggestionSelected,i=e.onHitClick,c=Object(N.a)((function(){return null}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{indexName:"image-document-search",searchClient:n},r.a.createElement(q.a,{hitsPerPage:5}),r.a.createElement(B,{onSuggestionSelected:o,onSuggestionCleared:a})),r.a.createElement(P.a,{indexName:"image-document-search",searchClient:n},r.a.createElement(c,{defaultRefinement:t}),r.a.createElement(I.a,{hitComponent:function(e){var n=e.hit;return r.a.createElement(K,{hit:n,onHitClick:i})}})))};function ee(){var e=Object(m.a)(["\n  position: fixed;\n  bottom: 0;\n  right: 0;\n  max-width: 400px;\n  padding: 20px;\n  width: 100%;\n  border-radius: 4px;\n  text-align: left;\n  box-sizing: border-box;\n  font-size: 14px;\n  margin: 18px;\n  box-shadow: 8px 8px 20px 10px rgba(200, 203, 216, 0.26);\n  z-index: 10;\n  background: white;\n  border-bottom: 4px solid transparent;\n\n  border-color: ",";\n"]);return ee=function(){return e},e}var ne=g.a.div(ee(),(function(e){switch(e.level){case"info":return"#253c6e";case"success":return"#57c59b";case"warning":return"rgb(255, 235, 148)";case"danger":return"rgb(246, 119, 119)";default:return"lightgrey"}}));function te(e){var n=e.level,t=e.children,a=e.style;return r.a.createElement(ne,{level:n,style:a},r.a.createElement("span",null,t||"Unknown Error: Try again later."))}t(147);var ae=t(74)("PT91NQX1UN","8307a3d77b5a9c445fb39839df23f6c4");var re=function(){var e=Object(u.b)(),n=Object(u.c)((function(e){return e.toast})),t=Object(u.c)((function(e){return e.modal})),o=Object(a.useState)(""),i=Object(c.a)(o,2),s=i[0],m=i[1];return r.a.createElement(D.a,{maxWidth:"md"},r.a.createElement(H,{modal:t,onClose:function(){return e(j())}}),n.shown&&r.a.createElement(te,{level:n.level},n.message),r.a.createElement("h1",null,"Image Document Search"),r.a.createElement(l.a,{onDrop:function(n){e(T(n[0]))}},(function(e){var n=e.getRootProps,t=e.getInputProps;return r.a.createElement("section",null,r.a.createElement("div",Object.assign({className:"Dropzone"},n()),r.a.createElement("input",t()),r.a.createElement("p",null,"Drag and drop an image or click here to upload it.")))})),r.a.createElement(Z,{client:ae,query:s,onSuggestionSelected:function(e,n){var t=n.suggestion;m(t.text)},onSuggestionCleared:function(){m("")},onHitClick:function(n){e(k(r.a.createElement($,{src:n.url,alt:n.objectID}))),e(j())}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var oe=t(21),ie=t(34),ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{open:!1,content:void 0},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"TOGGLE_MODAL":return Object(ie.a)({},e,{open:!e.open});case"SET_MODAL_CONTENT":return Object(ie.a)({},e,{content:n.content});default:return e}},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shown:!1,level:"",message:""},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SHOW_TOAST":return Object(ie.a)({},e,{shown:!0},n.toastProps);case"HIDE_TOAST":return Object(ie.a)({},e,{shown:!1});default:return e}},ue=Object(oe.c)({modal:ce,toast:le}),se=t(88),me=Object(oe.d)(ue,Object(oe.a)(se.a,(function(e){return function(n){return function(t){console.group(t.type),console.info("dispatching",t);var a=n(t);return console.log("next state",e.getState()),console.groupEnd(),a}}})));i.a.render(r.a.createElement(u.a,{store:me},r.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},98:function(e,n,t){e.exports=t(167)}},[[98,1,2]]]);
//# sourceMappingURL=main.fcfc73e4.chunk.js.map