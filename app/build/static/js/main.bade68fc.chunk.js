(this["webpackJsonpimage-document-search"]=this["webpackJsonpimage-document-search"]||[]).push([[0],{130:function(e,n,t){},159:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(25),i=t.n(o),c=(t(96),t(35)),l=t(84),s=t(170),u=t(172),m=t(175),h=t(174),g=t(83),f=t(171),d=t(26),p=t(12),v=t(27),b=t(28),w=t(30),y=t(173),E=t(169),x=t(79),S=t.n(x),k=function(e){function n(){var e,t;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(v.a)(this,(e=Object(b.a)(n)).call.apply(e,[this].concat(r)))).state={value:t.props.currentRefinement},t.onChange=function(e,n){var a=n.newValue;a||t.props.onSuggestionCleared(),t.setState({value:a})},t.onSuggestionsFetchRequested=function(e){var n=e.value;t.props.refine(n)},t.onSuggestionsClearRequested=function(){t.props.refine()},t}return Object(w.a)(n,e),Object(p.a)(n,[{key:"getSuggestionValue",value:function(e){return e.text}},{key:"renderSuggestion",value:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{height:"25",src:e.url,style:{marginRight:"8px"},alt:e.url}),r.a.createElement(y.a,{attribute:"text",hit:e,tagName:"mark"}))}},{key:"render",value:function(){var e=this.props,n=e.hits,t=e.onSuggestionSelected,a=this.state.value,o={placeholder:"Search for some text...",onChange:this.onChange,value:a};return r.a.createElement(S.a,{suggestions:n,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,onSuggestionSelected:t,getSuggestionValue:this.getSuggestionValue,renderSuggestion:this.renderSuggestion,inputProps:o})}}]),n}(a.Component),j=Object(E.a)(k),O=t(5),C=t(18),P=t(19);function R(){var e=Object(C.a)(["\n  overflow: hidden;\n  border-radius: 8px;\n\n  ","\n"]);return R=function(){return e},e}function D(){var e=Object(C.a)(["\n  width: 100%;\n  height: 100%;\n  transition: transform 0.2s ease-in-out;\n"]);return D=function(){return e},e}var N=P.a.img(D()),q=P.a.div(R(),(function(e){return e.withHover?"\n        &:hover {\n          & ".concat(N," {\n            transform: scale(1.05);\n          }\n        }"):null}));var I=function(e){var n=e.src,t=e.alt,a=e.withHover,o=e.style,i=Object(O.a)(e,["src","alt","withHover","style"]);return r.a.createElement(q,{withHover:a,style:o},r.a.createElement(N,Object.assign({src:n,alt:t},i)))};function U(){var e=Object(C.a)(["\n  margin-top: 20px;\n  color: ",";\n"]);return U=function(){return e},e}function F(){var e=Object(C.a)(["\n  width: auto;\n  text-align: center;\n\n  & > div {\n    width: ",";\n    height: ",";\n    margin: ",";\n    background-color: ",";\n\n    border-radius: 100%;\n    display: inline-block;\n    -webkit-animation: scaleUpDown 1.5s infinite ease-in-out both;\n    animation: scaleUpDown 1.5s infinite ease-in-out both;\n  }\n\n  & .circle1 {\n    -webkit-animation-delay: -0.3s;\n    animation-delay: -0.3s;\n  }\n\n  & .circle2 {\n    -webkit-animation-delay: -0.15s;\n    animation-delay: -0.15s;\n  }\n\n  @-webkit-keyframes scaleUpDown {\n    0%,\n    80%,\n    100% {\n      -webkit-transform: scale(0);\n    }\n    40% {\n      -webkit-transform: scale(1);\n    }\n  }\n\n  @keyframes scaleUpDown {\n    0%,\n    80%,\n    100% {\n      -webkit-transform: scale(0);\n      transform: scale(0);\n    }\n    40% {\n      -webkit-transform: scale(1);\n      transform: scale(1);\n    }\n  }\n"]);return F=function(){return e},e}function H(){var e=Object(C.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  width: 100%;\n"]);return H=function(){return e},e}var V=P.a.div(H()),W=P.a.div(F(),(function(e){return e.small?"8px":"16px"}),(function(e){return e.small?"8px":"16px"}),(function(e){return e.small?"0 4px":"0 8px"}),(function(e){return e.color?e.color:"#333"})),z=P.a.h4(U(),(function(e){return e.color?e.color:"#333"})),A=function(e){var n=e.quiet,t=e.color,a=e.small,o=Object(O.a)(e,["quiet","color","small"]);return r.a.createElement(V,o,r.a.createElement(W,{color:t,small:a},r.a.createElement("div",{className:"circle1"}),r.a.createElement("div",{className:"circle2"}),r.a.createElement("div",{className:"circle3"})),!n&&r.a.createElement(z,{level:5,color:t},function(){var e=["You might want to get a cup of coffee...","Shovelling coal into the server...","Programming the flux capacitor","Please wait and enjoy the elevator music.","At least you're not on hold.","Please wait while the satellite moves into position.","Please wait, we are testing your patience."];return e[Math.round(Math.random()*(e.length-1))]}()))},B=t(20),J=t.n(B),M=function(){return J.a.get("http://localhost:5000/getS3Url")},T=function(e,n){return J.a.put(e,n,{headers:{"Content-Type":n.type}})};var Q="".concat("http://localhost:5000/","images"),X=function(e){return J.a.post("".concat(Q),{image:e})},Y=(t(130),t(62)("PT91NQX1UN","8307a3d77b5a9c445fb39839df23f6c4")),$=Object(s.a)((function(){return null}));var G=function(){var e=Object(a.useState)(!1),n=Object(c.a)(e,2),t=n[0],o=n[1],i=Object(a.useState)(""),s=Object(c.a)(i,2),d=s[0],p=s[1],v=Object(a.useState)(!1),b=Object(c.a)(v,2),w=b[0],y=b[1],E=Object(a.useState)(),x=Object(c.a)(E,2),S=x[0],k=x[1];return r.a.createElement(f.a,{maxWidth:"md"},r.a.createElement(g.a,{open:w,onClose:function(){return y(!1)},center:!0,styles:{overlay:{backdropFilter:"blur(20px)",background:"rgba(0, 0, 0, 0.6)"},modal:{backgroundColor:"white",borderRadius:"8px",display:"flex",flexDirection:"column",maxWidth:"800px",width:"100%",padding:"50px"}}},S),r.a.createElement("h1",null,"Image Document Search"),r.a.createElement(u.a,{indexName:"image-document-search",searchClient:Y},r.a.createElement(m.a,{hitsPerPage:5}),r.a.createElement(j,{onSuggestionSelected:function(e,n){var t=n.suggestion;p(t.text)},onSuggestionCleared:function(){p("")}})),r.a.createElement(u.a,{indexName:"image-document-search",searchClient:Y},r.a.createElement($,{defaultRefinement:d}),t?r.a.createElement(A,null):r.a.createElement(l.a,{onDrop:function(e){var n;o(!0),(n=e[0],new Promise((function(e,t){M().then((function(e){return{imageId:"https://image-document-search.s3.amazonaws.com/"+e.data.key,url:e.data.url}})).then((function(a){var r=a.imageId,o=a.url;T(o,n).then((function(n){200===n.status?e(r):t("Image failed to upload")}))}))}))).then((function(e){return X(e).then(console.log).catch(console.error).finally((function(){o(!1)}))})).catch(console.error)}},(function(e){var n=e.getRootProps,t=e.getInputProps;return r.a.createElement("section",{className:"Dropzone"},r.a.createElement("div",n(),r.a.createElement("input",t()),r.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files")))})),r.a.createElement(h.a,{hitComponent:function(e){return r.a.createElement(I,{withHover:!0,style:{cursor:"pointer",margin:"0 2rem 2rem 0"},onClick:function(){k(r.a.createElement(I,{src:e.hit.url,alt:e.hit.url})),y(!0)},height:"150",src:e.hit.url,alt:e.hit.url})}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},91:function(e,n,t){e.exports=t(159)},96:function(e,n,t){}},[[91,1,2]]]);
//# sourceMappingURL=main.bade68fc.chunk.js.map